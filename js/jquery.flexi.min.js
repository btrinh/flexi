(function(a,b,c,d){var e=function(b,c){this.el=b,this.$el=a(b),this.$children=this.$el.children(),this.$wrapper="",this.$flexy="",this.runStatus="resumed",this.currentStep=0,this.nVisible=1,this.nChildren=this.$children.size(),this.childWidth=0,this.options=c,this.metadata=this.$el.data("plugin-options"),this._bind=function(a,b){return function(){return a.apply(b,arguments)}}};e.prototype={defaults:{step:1,speed:300,nav:!0,auto:!0,interval:5e3,visible:null},init:function(){this.config=a.extend({},this.defaults,this.options,this.metadata);var b=['<a class="flexi-prev" style="',"width: 32px;","height: 25px;","position: absolute;","background-image: url(&quot;img/arrow-left.png&quot;);",'"></a>'].join(""),c=['<a class="flexi-next" style="',"width: 32px;","height: 25px;","position: absolute;","background-image: url(&quot;img/arrow-right.png&quot;);",'"></a>'].join("");this.$flexi=this.$el.wrap('<div class="flexi" />').parent(),this.$wrapper=this.$flexi.wrap('<div class="flexi-wrapper" />').parent(),this.config.nav&&this.$wrapper.prepend(b).prepend(c),this.$el.css({width:9e3,position:"relative"}),this.$flexi.css({position:"relative",overflow:"hidden"}),this.$children.css({"float":"left"}),this.$wrapper.css({position:"relative"}),this.$navLeft=this.$wrapper.children("a.flexi-prev"),this.$navRight=this.$wrapper.children("a.flexi-next"),this._updateProp();var d=this.$navLeft.width(),e=this.$navLeft.height();if(this.config.nav){this.$flexi.css({marginLeft:"70px",marginRight:"70px"});var f=parseInt(this.$flexi.css("marginLeft")),g=parseInt(this.$flexi.css("marginRight"));this.$navLeft.css({top:(this.wrapperOuterHeight-e)/2+"px",left:(this.wrapperPaddingLeft+f-d)/2+"px"}),this.$navRight.css({top:(this.wrapperOuterHeight-e)/2+"px",right:(this.wrapperPaddingRight+g-d)/2+"px"}),this._updateProp()}return this.nVisible=this.config.visible||Math.floor(this.$flexi.width()/this.childWidth),this._updateProp(),this.$children.css({paddingLeft:this.padAdjustment,paddingRight:this.padAdjustment}),this._updateProp(),this.events(),this.config.auto&&this.autoRotate(),this},autoRotate:function(){b.setInterval(this._bind(function(){this.runStatus=="paused"?b.clearInterval:this.next()},this),this.config.interval)},events:function(){this.$flexi.bind({mouseenter:this._bind(function(){this.runStatus="paused"},this),mouseleave:this._bind(function(){this.runStatus="resumed"},this)}),this.$navRight.click(this._bind(this.next,this)),this.$navLeft.click(this._bind(this.prev,this))},prev:function(){this.currentStep=this.currentStep-this.config.step<0?this.nChildren-this.nVisible:this.currentStep-this.config.step,this.$el.stop().animate({left:-(this.childWidth*this.currentStep)},this.config.speed,null)},next:function(){this.currentStep=this.currentStep+this.config.step>this.nChildren-this.nVisible?0:this.currentStep+this.config.step,this.$el.stop().animate({left:-(this.childWidth*this.currentStep)},this.config.speed,null)},_updateProp:function(){this.wrapperOuterHeight=this.$wrapper.outerHeight(),this.wrapperPaddingLeft=parseInt(this.$wrapper.css("paddingLeft")),this.wrapperPaddingRight=parseInt(this.$wrapper.css("paddingRight")),this.childWidth=this.$children.eq(0).outerWidth();var a=this.$flexi.innerWidth();this.padAdjustment=(a-this.childWidth*this.nVisible)/(this.nVisible*2)}},e.defaults=e.prototype.defaults,a.fn.flexi=function(a){return this.each(function(){(new e(this,a)).init()})}})(jQuery,window,document);